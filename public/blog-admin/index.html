<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>READ — Administration Blog</title>
  <link rel="icon" href="/lovable-uploads/aad9910b-4e2b-46cf-933a-002fa4205756.png" />
</head>
<body>

  <!-- 1) ON GARDE le flag  -->
  <script>window.CMS_MANUAL_INIT = true;</script>

  <!-- 2) On charge Décap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.6.4/dist/decap-cms.js"></script>

  <!-- 3) On charge le YAML PUIS on appelle CMS.init() UNE SEULE FOIS -->
  <script>
    fetch('/blog-admin/config.yml')
      .then(r => r.text())
      .then(cfg => {
        CMS.init({ config: cfg, configType: 'yaml' });   // ← unique appel
      })
      .catch(err => console.error('[Decap] config.yml error :', err));
  </script>

  <!-- 4) AUCUN autre CMS.init, AUCUN script fallback -->
</body>
</html>
